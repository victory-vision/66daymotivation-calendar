<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>66-Day Tracker</title>
  <style>
    :root { --accent:#0b84ff; --bg:#000000; --card:#111111; --text:#f5f5f5 }
    html,body { height:100%; margin:0; font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; color:var(--text) }

    /* IMPORTANT: use flex-start so top content is never visually cropped */
    body { display:flex; align-items:flex-start; justify-content:center; background:var(--bg); padding:18px }

    .app { width:100%; max-width:760px; background:var(--card); border-radius:14px; box-shadow:0 8px 30px rgba(0,0,0,.6); padding:18px }
    header { text-align:center; margin-bottom:14px; overflow:visible }
    /* STRONGER logo rule so it can't be accidentally overridden */
    header img {
      display:block !important;
      margin: 30px auto 12px auto !important;    /* extra top breathing room */
      max-width:140px !important;
      max-height:140px !important;               /* prevent cropping */
      object-fit: contain !important;
      box-sizing: border-box !important;
      padding-top: 6px !important;
    }

    header h1 { margin:0; font-size:22px; color:var(--text) }
    .goal-input { margin-top:12px }
    #goalInput{ width:100%; max-width:720px; padding:12px 14px; border-radius:8px; border:1px solid #222; background:#050505; color:#fff; font-size:18px; text-align:center }
    .goal-display { margin-top:10px; font-size:22px; font-weight:700; color:#fff; text-align:center }
    .quote-display { margin-top:10px; font-size:16px; font-style:italic; color:#bfeef5; text-align:center; min-height:40px }
    .status { font-weight:700; font-size:28px; margin:14px 0; text-align:center }
    .grid { display:grid; grid-template-columns:repeat(6,1fr); gap:8px; margin-top:12px }
    .cell { height:48px; border-radius:8px; border:1px solid #333; display:flex; align-items:center; justify-content:center; font-weight:600; color:var(--text) }
    .cell.done { background:linear-gradient(90deg,var(--accent),#2dd4bf); color:white; border:none; opacity:0.85 }
    .actions { display:flex; gap:8px; margin-top:14px; justify-content:center }
    button { padding:12px 16px; border-radius:10px; border:none; font-weight:700; cursor:pointer }
    .tick { background:var(--accent); color:#fff; flex:1 }
    .tick:disabled { background:#444; cursor:not-allowed; color:#ddd }
    .reset { background:#c00; color:#fff }
    .small { font-size:12px; color:#aaa; margin-top:8px; text-align:center }

    @media (max-width:720px){
      .grid { grid-template-columns:repeat(6,1fr) }
      header img { max-width:100px; max-height:100px }
      #goalInput { width:92% }
    }
  </style>
</head>
<body>
  <div class="app" role="application">
    <header>
      <!-- Make sure a file named EXACTLY "logo.png" is in the same folder -->
      <img src="logo.png" alt="Logo" />
      <h1>66-Day Tracker</h1>
      <div class="goal-input">
        <input id="goalInput" type="text" placeholder="Enter your goal here..." />
      </div>
      <div id="goalDisplay" class="goal-display"></div>
      <div id="quoteDisplay" class="quote-display"></div>
    </header>

    <div class="status" id="status">Day 0 of 66</div>

    <div class="actions">
      <button id="tickBtn" class="tick">Tick Today ✅</button>
      <button id="resetBtn" class="reset">Reset</button>
    </div>

    <div class="small">Tip: Press <strong>Tick Today</strong> once per day. If you skip a day, progress resets to Day 1.</div>
    <div class="grid" id="grid"></div>
  </div>

  <script>
    const MAX = 66;
    const KEY = 'sixtySixTracker_v2';
    const quotes = [
      "Consistency is harder when no one is clapping for you. Stay disciplined.",
      "Small steps every day lead to big change.",
      "Discipline beats motivation — keep going.",
      "You’re building habits, not just ticking days.",
      "Future you will thank you for not quitting.",
      "The start is hard, the finish is worth it."
    ];

    function ymd(d){ return d.toISOString().slice(0,10); }
    function todayStr(){ return ymd(new Date()); }
    function yesterdayStr(){ const d=new Date(); d.setDate(d.getDate()-1); return ymd(d); }

    function load(){ try{ const raw = localStorage.getItem(KEY); if(!raw) return {day:0,last:null,goal:'',quote:''}; return JSON.parse(raw); }catch(e){ return {day:0,last:null,goal:'',quote:''}; } }
    function save(s){ localStorage.setItem(KEY, JSON.stringify(s)); }

    let state = load();

    const statusEl = document.getElementById('status');
    const gridEl = document.getElementById('grid');
    const tickBtn = document.getElementById('tickBtn');
    const resetBtn = document.getElementById('resetBtn');
    const goalInput = document.getElementById('goalInput');
    const goalDisplay = document.getElementById('goalDisplay');
    const quoteDisplay = document.getElementById('quoteDisplay');

    goalInput.value = state.goal;
    goalDisplay.textContent = state.goal || '';
    quoteDisplay.textContent = state.quote || '';

    function render(){
      statusEl.textContent = `Day ${state.day||0} of ${MAX}`;
      gridEl.innerHTML = '';
      for(let i=1;i<=MAX;i++){
        const c = document.createElement('div');
        c.className = 'cell' + (i <= state.day ? ' done' : '');
        c.textContent = i;
        gridEl.appendChild(c);
      }
      // disable tick button if already ticked today
      if(state.last === todayStr()){
        tickBtn.disabled = true;
        tickBtn.textContent = "You have completed your task. Come back tomorrow";
      } else {
        tickBtn.disabled = false;
      }
    }

    function tickToday(){
      const today = todayStr();
      if(state.last === today){ return; }
      if(!state.last || state.day === 0){
        state.day = 1; state.last = today;
      } else if(state.last === yesterdayStr()){
        state.day = Math.min(MAX, state.day + 1); state.last = today;
      } else {
        alert('You missed a day. Progress reset.');
        state.day = 1; state.last = today;
      }
      state.quote = quotes[Math.floor(Math.random()*quotes.length)];
      save(state);
      goalDisplay.textContent = state.goal;
      quoteDisplay.textContent = state.quote;
      // disable and change text
      tickBtn.disabled = true;
      tickBtn.textContent = "You have completed your task. Come back tomorrow";
      clearInterval(timerInterval);
      render();
    }

    function resetAll(){
      if(confirm("Reset everything? Your goal and progress will be cleared.")){
        state = { day:0, last:null, goal:'', quote:'' };
        save(state);
        goalInput.value = '';
        goalDisplay.textContent = '';
        quoteDisplay.textContent = '';
        tickBtn.disabled = false;
        startCountdown();
        render();
      }
    }

    goalInput.addEventListener('input', ()=>{
      state.goal = goalInput.value;
      goalDisplay.textContent = state.goal;
      save(state);
    });

    tickBtn.addEventListener('click', tickToday);
    resetBtn.addEventListener('click', resetAll);

    (function dayCheckOnLoad(){
      if(!state.last){ render(); return; }
      const today = todayStr();
      if(state.last === today || state.last === yesterdayStr()){ render(); return; }
      state = { day:0, last:null, goal: state.goal, quote:'' };
      save(state);
      render();
    })();

    render();

    /* Countdown until midnight in Tick button */
    let timerInterval;
    function updateCountdown(){
      if(state.last === todayStr()) return;
      const now = new Date();
      const midnight = new Date();
      midnight.setHours(24,0,0,0);
      const diff = midnight - now;
      const hrs = String(Math.floor(diff / (1000*60*60))).padStart(2,'0');
      const mins = String(Math.floor((diff % (1000*60*60)) / (1000*60))).padStart(2,'0');
      const secs = String(Math.floor((diff % (1000*60)) / 1000)).padStart(2,'0');
      tickBtn.textContent = `Tick Today ✅ (You have ${hrs}:${mins}:${secs})`;
    }
    function startCountdown(){
      clearInterval(timerInterval);
      updateCountdown();
      timerInterval = setInterval(updateCountdown, 1000);
    }
    startCountdown();
  </script>
</body>
</html>
